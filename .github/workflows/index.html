<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>–í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ üíò</title>
  <style>
    :root { --pink:#e6a6b8; --bg:#fff5f7; }
    body{
      margin:0; min-height:100vh;
      display:grid; place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:#f7f2f6;
    }
    .card{
      width:min(520px, 94vw);
      background:#fff;
      border:6px solid var(--pink);
      border-radius:18px;
      padding:18px;
      box-shadow:0 12px 30px rgba(0,0,0,.08);
    }
    h1{ margin:0 0 10px; font-size:24px; }
    #msg{ margin:0 0 12px; color:#444; min-height:24px; }

    /* –ê—Ä–µ–Ω–∞ –ø–æ–¥ –ø–∞–ª—å—Ü—ã */
    #arena{
      position:relative;
      height:170px;
      border-radius:16px;
      background:var(--bg);
      border:2px dashed var(--pink);
      overflow:hidden;
      touch-action: manipulation;
    }

    button{
      border:0;
      padding:14px 20px;
      font-size:18px;
      border-radius:12px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }

    #yes{
      position:absolute;
      left:16px;
      top:58px;
      background:#38c172;
      color:white;
    }

    #no{
      position:absolute;
      left:220px;
      top:58px;
      background:#ff4d4d;
      color:white;

      opacity: 1;
      transition: left .12s linear, top .12s linear, opacity .25s ease;
      touch-action: none;
    }
  </style>
</head>
<body>
<div class="card">
  <h1>–¢—ã –ª—é–±–∏—à—å –º–µ–Ω—è? üôÇüíî</h1>
  <p id="msg"></p>

  <div id="arena">
    <button id="yes">–î–ê</button>
    <button id="no">–ù–ï–¢</button>
  </div>
</div>

<script>
  const arena = document.getElementById('arena');
  const noBtn = document.getElementById('no');
  const yesBtn = document.getElementById('yes');
  const msg = document.getElementById('msg');

  let tries = 0;
  let finished = false;

  function rectRelativeToArena(el){
    const a = arena.getBoundingClientRect();
    const r = el.getBoundingClientRect();
    return { x:r.left-a.left, y:r.top-a.top, w:r.width, h:r.height };
  }

  function overlaps(r1, r2){
    return !(r1.x+r1.w < r2.x || r2.x+r2.w < r1.x || r1.y+r1.h < r2.y || r2.y+r2.h < r1.y);
  }

  function moveNo(){
    if (finished) return;

    const a = arena.getBoundingClientRect();
    const b = noBtn.getBoundingClientRect();
    const pad = 10;

    const maxX = a.width  - b.width  - pad*2;
    const maxY = a.height - b.height - pad*2;

    const yesR = rectRelativeToArena(yesBtn);

    // –ø—ã—Ç–∞–µ–º—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –Ω–∞–π—Ç–∏ –ø–æ–∑–∏—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ù–ï –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç "–î–ê"
    for (let i=0; i<20; i++){
      const x = pad + Math.random() * Math.max(0, maxX);
      const y = pad + Math.random() * Math.max(0, maxY);

      const noR = { x, y, w: b.width, h: b.height };
      if (!overlaps(noR, yesR)){
        noBtn.style.left = `${x}px`;
        noBtn.style.top  = `${y}px`;
        break;
      }
    }

    tries++;
    if (tries === 2) msg.textContent = "–û–π üôÇ";
    if (tries === 5) msg.textContent = "–ù–µ —Ç—É–¥–∞ –∂–º—ë—à—å üòÖ";
    if (tries === 10) msg.textContent = "–ö–∞–∂–µ—Ç—Å—è, –æ—Ç–≤–µ—Ç –æ—á–µ–≤–∏–¥–µ–Ω ‚ù§Ô∏è";
  }

  // –ì–ª–∞–≤–Ω–æ–µ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞: —É–±–µ–≥–∞–µ—Ç –ù–ê –ü–û–ü–´–¢–ö–ï –ù–ê–ñ–ê–¢–ò–Ø
  function dodge(e){
    if (finished) return;
    e.preventDefault();
    e.stopPropagation();
    moveNo();
    if (navigator.vibrate) navigator.vibrate(20);
  }

  noBtn.addEventListener('pointerdown', dodge, { passive:false });
  noBtn.addEventListener('touchstart',  dodge, { passive:false });

  // –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –±–ª–æ–∫–∏—Ä—É–µ–º click –ø–æ "–ù–ï–¢"
  noBtn.addEventListener('click', (e) => {
    if (!finished) e.preventDefault();
  });

  yesBtn.addEventListener('click', () => {
    finished = true;

    msg.textContent = "–Ø —Ç–µ–±—è –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –ª—é–±–ª—é –º–æ–π –ª–∏—Å—ë–Ω–æ–∫! ‚ù§Ô∏èüôÇ";
    yesBtn.textContent = "–î–ê!!!";

    // –ø—Ä—è—á–µ–º "–ù–ï–¢" (–∫—Ä–∞—Å–∏–≤–æ ‚Äî —Å –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ–º)
    noBtn.style.pointerEvents = "none";
    noBtn.style.opacity = "0";
    setTimeout(() => { noBtn.style.display = "none"; }, 260);

    // (–ø–æ –∂–µ–ª–∞–Ω–∏—é) —Å—Ç–∞–≤–∏–º "–î–ê" –ø–æ —Ü–µ–Ω—Ç—Ä—É
    yesBtn.style.left = "50%";
    yesBtn.style.transform = "translateX(-50%)";
  });

  // —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è —á—É—Ç—å —Å–ª—É—á–∞–π–Ω–∞—è
  moveNo(); tries = 0;
</script>
</body>
</html>
